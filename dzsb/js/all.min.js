/*! zyHome 2017-04-07 */
(function(){function t(t){if(null===p){var e=$(t.target).closest(".item");if(!e.length)return $(".overlay").hide(),void 0;t.touches&&(t=t.touches[0]),p=t.clientY,e.addClass("no-animation"),e.next().addClass("no-animation"),e.prev().addClass("no-animation")}}function e(t){if(t.preventDefault(),null!==p){var e=$(t.target).closest(".item");if(!e.length)return $(".overlay").hide(),void 0;t.touches&&(t=t.touches[0]),h=(p-t.clientY)/window.screen.height,h>0?m[u.type].upDrag(h,e):e.prev()&&m[u.type].downDrag(h,e)}}function a(t){$(".overlay").show(),p=null;var e=$(t.target).closest(".item");return e.length?(e.removeClass("no-animation"),e.next().removeClass("no-animation"),e.prev().removeClass("no-animation"),h>=v?i(e):Math.abs(h)>=v?o(e):r(e),h=0,void 0):($(".overlay").hide(),void 0)}function n(t){var e=$(t.target).closest(".item");e.length&&i(e)}function s(t){var e=$(t.target).closest(".item");e.length&&o(e)}function i(t){t.next().length?(t.attr("state","prev"),t.siblings(".item").removeAttr("state"),f=t.next(),f.attr("state","next"),l(t.next()),m[u.type].nextSlide(t)):m[u.type].showSlide(t)}function o(t){t.prev().length?(t.attr("state","prev"),t.siblings(".item").removeAttr("state"),f=t.prev(),f.attr("state","next"),m[u.type].prevSlide(t)):m[u.type].showSlide(t)}function r(t){m[u.type].showSlide(t)}function c(t){if($("body").addClass("H5FullscreenPage"),f=$(".item").first(),f.attr("state","next"),t.useAnimation){var e=$(".item");e.find(".part").addClass("hide"),l(e.first())}if($("body").append('<div class="overlay"></div>'),t.useArrow&&$(".item").slice(0,$(".item").length-1).append('<span class="arrow"></span>'),t.useMusic){var a=t.useMusic.autoPlay?'autoplay="autoplay"':"",n=t.useMusic.loopPlay?'loop="loop"':"",s=t.useMusic.src;$("body").append('<span class="music play"><audio id="audio" src='+s+" "+a+" "+n+"></audio></span>")}}function l(t){var e=$(t).find(".part");e.forEach(function(t){var e=$(t).attr("data-delay")||100;setTimeout(function(){$(t).removeClass("hide")},e)})}function d(i){if(i.useParallax){var o={x:0,y:0};window.addEventListener("deviceorientation",function(t){var e=t.gamma,a=t.beta,n=-e,s=-a;if(.1>Math.abs(Math.abs(n)-Math.abs(o.x))||.1>Math.abs(Math.abs(s)-Math.abs(o.y)))return o.x=n,o.y=s,void 0;o.x=n,o.y=s;var i=window.innerWidth/2,r=window.innerHeight/2,c=5,l=$(".parallax");l.forEach(function(t){var e=t.getBoundingClientRect().width/c*(n/i),a=t.getBoundingClientRect().width/c*(s/r);$(t).hasClass("item")?(e=-e/1+50,a=-a/1+50,t.style["background-position"]=""+e+"% "+a+"%"):t.style.transform=t.style["-webkit-transform"]="translate3d("+e+"px,"+a+"px,0)"})},!1)}if(i.useShakeDevice&&i.useShakeDevice.speed){var r=y=z=lastX=lastY=lastZ=0;window.DeviceMotionEvent&&window.addEventListener("devicemotion",function(){var t=event.accelerationIncludingGravity;r=t.x,y=t.y,z=t.z,(Math.abs(r-lastX)>i.useShakeDevicespeed||Math.abs(y-lastY)>i.useShakeDevicespeed||Math.abs(z-lastZ)>i.useShakeDevicespeed)&&i.useShakeDevice.callback&&i.useShakeDevice.callback(f),lastX=r,lastY=y,lastZ=z},!1)}$(".music").on("tap",function(){$(this).toggleClass("play");var t=document.getElementById("audio");t.paused?t.play():t.pause()}),$(document).on("touchmove",function(t){t.preventDefault()}),i.type>4?(i.type=i.type-4,$(".item").on({swipeUp:n,swipeDown:s})):$(".item").on({touchstart:t,touchmove:e,touchend:a,touchcancel:a}),$(".item").on("tap",function(){$(".overlay").hide()}),$(".item").on("transitionend webkitTransitionEnd",function(t){$(".overlay").hide(),"next"==$(t.target).attr("state")?i.pageShow(t.target):i.pageHide(t.target)}),$(".overlay").on("tap",function(){$(".overlay").hide()})}var u={type:1,pageShow:function(){},pageHide:function(){},useShakeDevice:{speed:30,callback:function(){}},useParallax:!0,useArrow:!0,useAnimation:!0,useMusic:!1};window.H5FullscreenPage={init:function(t){$.extend(u,t),c(u),d(u)},addItemEven:function(i){u.type>4?(u.type=u.type-4,i.on({swipeUp:n,swipeDown:s})):i.on({touchstart:t,touchmove:e,touchend:a,touchcancel:a}),i.on("tap",function(){$(".overlay").hide()}),i.on("transitionend webkitTransitionEnd",function(t){$(".overlay").hide(),"next"==$(t.target).attr("state")?u.pageShow(t.target):u.pageHide(t.target)})}};var f,m={1:{upDrag:function(t,e){var a=1-.7*t;e.next().css("-webkit-transform","translate3d(0,"+100*a+"%,0)")},downDrag:function(t,e){var a=-(.7*t);e.prev().css("-webkit-transform","translate3d(0,"+(100*a-100)+"%,0)"),e.css("-webkit-transform","translate3d(0,"+100*a+"%,0)")},nextSlide:function(t){t.css("-webkit-transform","translate3d(0,-100%,0)"),t.next().css("-webkit-transform","translate3d(0,0,0)")},prevSlide:function(t){t.prev().css("-webkit-transform","scale(1)"),t.css("-webkit-transform","translate3d(0,100%,0)")},showSlide:function(t){t.css("-webkit-transform","scale(1)"),t.next().css("-webkit-transform","translate3d(0,100%,0)")}},2:{upDrag:function(t,e){var a=1-.2*t,n=1-.7*t;e.css("-webkit-transform","scale("+a+")"),e.next().css("-webkit-transform","translate3d(0,"+100*n+"%,0)")},downDrag:function(t,e){var a=.8-.2*t,n=-(.7*t);e.css("-webkit-transform","translate3d(0,"+100*n+"%,0)"),e.prev().css("-webkit-transform","scale("+a+")")},nextSlide:function(t){t.css("-webkit-transform","scale(.8)"),t.next().css("-webkit-transform","translate3d(0,0,0)")},prevSlide:function(t){t.prev().css("-webkit-transform","scale(1)"),t.css("-webkit-transform","translate3d(0,100%,0)")},showSlide:function(t){t.css("-webkit-transform","scale(1)"),t.next().css("-webkit-transform","translate3d(0,100%,0)")}},3:{upDrag:function(t,e){var a=1-.4*t;e.css("-webkit-transform","translate3d(0,"+(100*a-100)+"%,0)"),e.next().css("-webkit-transform","translate3d(0,"+100*a+"%,0)")},downDrag:function(t,e){var a=-(.4*t);e.prev().css("-webkit-transform","translate3d(0,"+(100*a-100)+"%,0)"),e.css("-webkit-transform","translate3d(0,"+100*a+"%,0)")},nextSlide:function(t){t.css("-webkit-transform","translate3d(0,-100%,0)"),t.next().css("-webkit-transform","translate3d(0,0,0)")},prevSlide:function(t){t.prev().css("-webkit-transform","scale(1)"),t.css("-webkit-transform","translate3d(0,100%,0)")},showSlide:function(t){t.css("-webkit-transform","scale(1)"),t.next().css("-webkit-transform","translate3d(0,100%,0)")}},4:{upDrag:function(t,e){var a=1-.4*t;e.css("-webkit-transform","translate3d(0,"+(100*a-100)+"%,0)"),e.next().css("-webkit-transform","translate3d(0,"+100*a+"%,0)")},downDrag:function(t,e){var a=-(.4*t);e.prev().css("-webkit-transform","translate3d(0,"+(100*a-100)+"%,0)"),e.css("-webkit-transform","translate3d(0,"+100*a+"%,0)")},nextSlide:function(t){t.addClass("zindex"),setTimeout(function(){t.removeClass("no-animation").css("-webkit-transform","translate3d(0,-100%,0)"),t.next().removeClass("zindex").addClass("no-animation").css("-webkit-transform","translate3d(0,0,0)")},100)},prevSlide:function(t){t.prev().css("-webkit-transform","translate3d(0,0,0)"),t.next().css("-webkit-transform","translate3d(0,100%,0)"),t.removeClass("zindex")},showSlide:function(t){t.css("-webkit-transform","scale(1)"),t.next().css("-webkit-transform","translate3d(0,100%,0)")}}},v=.15,p=null,h=0})(),$(function(){function t(){a++,6==a&&(a=1),e($(".y"+a))}function e(t){var e=$(t);e.siblings().removeClass("light"),e.addClass("light"),$("#ablity").text(e.data("desc")),$(".item2 .content .text").animate({opacity:.1,top:"80%"},10,"ease-out",function(){$(".item2 .content .text").animate({opacity:1,top:"72%"},800)}),e.hasClass("y1")&&$.each($(".huan"),function(t,e){$(e).animate({left:$(e).data("voice-left")+"%",top:$(e).data("voice-top")+"%"},500,"ease-out")}),e.hasClass("y2")&&$.each($(".huan"),function(t,e){$(e).animate({left:$(e).data("game-left")+"%",top:$(e).data("game-top")+"%"},500,"ease-out")}),e.hasClass("y3")&&$.each($(".huan"),function(t,e){$(e).animate({left:$(e).data("video-left")+"%",top:$(e).data("video-top")+"%"},500,"ease-out")}),e.hasClass("y4")&&$.each($(".huan"),function(t,e){$(e).animate({left:$(e).data("book-left")+"%",top:$(e).data("book-top")+"%"},500,"ease-out")}),e.hasClass("y5")&&$.each($(".huan"),function(t,e){$(e).animate({left:$(e).data("media-left")+"%",top:$(e).data("media-top")+"%"},500,"ease-out")})}var a=1,n=setInterval(t,3e3);$(".huan").click(function(){clearInterval(n),e(this)})});